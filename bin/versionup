#!/usr/bin/env node

/**
 * Command line interface of versionup.
 * This file is auto generated by ape-tmpl.
 */

'use strict'

const program = require('commander')
const pkg = require('../package')
const versionup = require('../lib')

program
  .version(pkg[ 'version' ])
  .usage('[options] ')
  .description(pkg[ 'description' ])
  .option('-p, --path <path>', 'Project root path or json file path to work with')
  .option('-l, --level <level>', 'Level to change. "major", "minor", or "patch".')
  .option('-a, --amount <amount>', 'Amount to increment.')
program.parse(process.argv)

// Run main command
versionup.apply(versionup, program.args.concat({
  path: program.path,
  level: program.level,
  amount: program.amount})
).catch(handleError)

// Handlers

/** Handle error */
function handleError (err) {
  console.error(err)
  process.exit(1)
}
